<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>AEM - Adobe CMS 扒坑记之始 | OwenYang&#39;S IDEAS</title>
  <meta name="description" content="" />
  <meta name="keywords" content="blog, tech blog, code, personal opinion, OwenYang ideas" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="/img/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" href="/css/moody.css" type="text/css">

  <meta name="generator" content="OwenYang'S IDEAS">

  
  
  

  
</head>

<!--
<body class="post-template">
-->
<body class="home-template">
<div id="perspective" class="perspective effect-movedown">
  <div class="container">
    <!-- wrapper -->
    <div class="wrapper">

      <header class="header">
    <a href="/" class="logo">OwenYang'S IDEAS</a>
    <nav class="header__nav">
        <ul class="header__nav-list">
            <li class="nav-item"><a href="/">Home</a></li>
            <li class="nav-item"><a href="/about">About</a></li>
        </ul>
    </nav>
    <div class="hero">
          <div class="hero__background">
            <img src="/img/background.jpg">
          </div>
        <div class="hero__cover on"></div>
    </div>
</header>

      

<main class="content" role="main">
  <article class="post">
    <h1 class="post-title">AEM - Adobe CMS 扒坑记之始</h1>
    <span class="post-meta">
      <time datetime="2014-12-13T08:02:06.000Z" itemprop="datePublished">
          Dec 13 2014
      </time>
    
    
    | 
    <a href='/tags/AEM/'>AEM</a>, 
    
    <a href='/tags/CMS/'>CMS</a>, 
    
    <a href='/tags/Drupal/'>Drupal</a>, 
    
    <a href='/tags/Adobe/'>Adobe</a>, 
    
    <a href='/tags/Experience-Management/'>Experience Management</a>
    
    
</span>
    <section class="post-content">
      <p>AEM是Adobe公司所出的商业内容管理系统，全称<strong>阿豆比体验管理系统</strong>(Adobe Experience Manager)，其前身叫<strong>CQ</strong>，分别有<code>CQ5</code> <code>CQ6</code>两个大版本。它提供了整套的网站内容管理系统解决方案，是一个企业级的重型系统。当然，这套系统在中国几乎没什么人知晓。但在澳洲，这系统几乎在所有金融行业遍地开花了。</p>
<p>基于客户的发展战略，不可避免地开始了<code>AEM</code>的扒坑之旅。不过，此前一直在扒<code>Drupal</code>的坑，再扒一堆坑也无关紧要了。</p>
<h2 id="AEM_技术栈">AEM 技术栈</h2>
<p><img src="/images/cq_technology_stack.png" alt="stack" title="cq5 technology stack"></p>
<h3 id="Apache_Sling">Apache Sling</h3>
<p><code>Apache Sling</code> 是一个以内容为中心的网络框架。其使用Java的内容仓库去存储与管理内容，比如<code>Apache Jackrabbit</code> 和 <code>CRX</code>。</p>
<blockquote>
<ul>
<li>基于<code>REST</code>原则，以内容为导向进行开发</li>
<li>与<code>CQ5</code>(或者说<code>AEM5, 6</code>)天然集成</li>
<li>用于处理<code>HTTP</code>的渲染与<code>数据存储</code>的请求。这是一种新的方式，它将在后台将内容组装，渲染最终将其呈现给用户</li>
<li>能将内容对象与处理数据的组成映射起来</li>
<li>支持服务端与<code>AJAX</code>请求</li>
<li>支持多种脚本语言(比如，JSP, ESP, Ruby等)</li>
<li><em>注</em> <a href="http://incubator.apache.org/projects/sling.html" target="_blank" rel="external">http://incubator.apache.org/projects/sling.html</a> 查看更多关于<code>Sling</code>的信息</li>
</ul>
</blockquote>
<hr>
<h3 id="OSGi_(Apache_Felix)">OSGi (Apache Felix)</h3>
<p>CQ5 内建了基于<code>OSGI R4 服务平台</code>(OSGi Service Platform Release 4) 的应用程序框架。</p>
<blockquote>
<ul>
<li>是一个针对<code>JAVA</code>的动态模块系统</li>
<li>发展自通用中间键。很多第三方的组件可以以bundle的形式进行复用</li>
<li>OSGI的bundle可以包含经编译后的JAVA代码，脚本，或者内容。这些均可根据需要将其加载到相应的仓库，或者对其进行配置等等。</li>
</ul>
</blockquote>
<h2 id="获得软件">获得软件</h2>
<p>所有需要的，只是一个可独立执行的jar包。由于是商业软件，License是必须的。我们将其放到一个文件夹下，暂且命名为<code>aem-install</code>吧。<br><img src="/images/aem-dir.png" alt="aem-dir" title="AEM directory structure"></p>
<p>关于目录下的 <code>crx-quickstart</code> 是当你启动后，自动生成的。里面包含了，你开发所需要的所有，包含所有的内容，以及配置等等。</p>
<h3 id="准备">准备</h3>
<p>AEM 是一个基于<code>JAVA</code>跨平台的系统，所以<code>OS X</code>, <code>桌面版 Windows</code>, <code>Linux</code>肯定都可以支持啦。</p>
<p>唯一需要注意的是，AEM运行在<code>JAVA 7</code>上。所以如果你是用的<code>JAVA 8</code>，但却装有<code>JAVA 7</code>的话，只需要切换一下<code>JAVA_HOME</code>。将这条命令放在你的 <code>.bashrc</code> 或者<code>.zshrc</code> source一下就搞定啦。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JAV<span class="built_in">A_HOME</span>=<span class="escape">`/</span>usr/libexec/jav<span class="built_in">a_home</span> -v <span class="number">1.7</span>`</div></pre></td></tr></table></figure>

<h3 id="启动">启动</h3>
<p>好的，一准备工作就绪，那么我们就开始我们的正式启动。比如有趣的是，Adobe提供了两种方法供我们使用。</p>
<blockquote>
<p><strong>1. 控制台</strong></p>
<p>不用说，作为一个职业代码人，我们还是比较喜欢这样的方式的。</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -Xmx1024M -jar <span class="keyword">cq</span>-author-p4502.jar -<span class="keyword">p</span> <span class="number">4502</span> -<span class="keyword">r</span> author</div></pre></td></tr></table></figure>

<p>其中，以下两个参数是可省的，因为默认的参数就是 <strong>端口 4502</strong>，<strong>模式 author</strong>。当然，如果你的电脑足够强大，<strong>-Xmx1024M</strong> 也是可以省的。</p>
<blockquote>
<ul>
<li><code>-p</code>指的是工作端口</li>
<li><code>-r</code>指的是启动模式。常见的模式有<code>author</code> 与 <code>publish</code>两种。当然还有其他的，用得不多就此略过罢</li>
</ul>
</blockquote>
<hr>
<blockquote>
<p><strong>2. GUI 双击</strong></p>
<p>当然，有时为了方便，也可以直接双击<code>cq-author-p4502.jar</code>启动。只是有几个需要注意的地方。</p>
</blockquote>
<p>默认的情况，是以<code>author</code>模式，启动在<code>localhost:4502</code>。但我们可以在启动以前，通过修改jar包的名字，达到不同模式不同端口的效果。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cq</span>-&lt;instance-<span class="built_in">type</span>&gt;-<span class="keyword">p</span>&lt;port-<span class="keyword">number</span>&gt;.jar</div></pre></td></tr></table></figure>

<p>比如，修改成</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cq</span>-author-p4502.jar</div></pre></td></tr></table></figure>

<p>启动，这就达到了以<code>author</code>模式启动，端口设置在 <code>4502</code>的效果。<br>同理，修改成</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cq</span>-publish-p4503.jar</div></pre></td></tr></table></figure>

<p>启动，就将以<code>publish</code>的模式启动，端口是<code>4503</code>。<br>理想的情况是，你需要同时启动两个<code>instance</code>，只需要把jar包和license文件放在相应目录下就可以了。如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">aem-install</span>&gt;</span>/author</div><div class="line">和</div><div class="line"><span class="tag">&lt;<span class="title">aem-install</span>&gt;</span>/publish</div></pre></td></tr></table></figure>

<h3 id="就绪">就绪</h3>
<p>当AEM启动后，会自动打开浏览器定位到相应的页面。比如，我的是<code>localhost:4502</code>。以<code>admin:admin</code>登陆就可以开始正式的开发之路了。<br><img src="/images/crx_de.png" alt="crx-de" title="crx/de"></p>
<h2 id="小结">小结</h2>
<p>那么就此开始，我们已经扒完了AEM的第一坑了，AEM的填坑之路就正式开始了。接下来几篇，我将着重在开发之上，讲解一下AEM的整个开发流程。</p>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>Owen Yang</h4>
    <p>爱看书，爱社区，爱前端，爱代码。爱这样一个挨踢的行业。</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-sina-weibo" href="http://v.t.sina.com.cn/share/share.php?url=http://owenyang0.github.io/2014/12/13/AEM-Adobe-CMS-扒坑记之始/&title=AEM - Adobe CMS 扒坑记之始 | OwenYang&#39;S" target="_blank">
        <span class="hidden">weibo</span>
    </a>
    <a class="icon-twitter" href="http://twitter.com/share?url=http://owenyang0.github.io/2014/12/13/AEM-Adobe-CMS-扒坑记之始/"
       onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://owenyang0.github.io/2014/12/13/AEM-Adobe-CMS-扒坑记之始/"
       onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://owenyang0.github.io/2014/12/13/AEM-Adobe-CMS-扒坑记之始/"
       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>

    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2014/12/14/css-position-relative与display-table-cell深入分析/">
        ← css - position relative与display table-cell深入分析
    </a>
    
    <span class="icon-logo">•</span>
    
    <a class="older-posts" href="/2014/12/11/Change-Tab-Title-with-JavaScript/">
        Change Tab Title with JavaScript →
    </a>
    
</nav>

  <div id="comment" class="comments-area">
    <h4 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h4>
    
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
    
</div>

</main>


      
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">OwenYang'S IDEAS</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-57882600-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>


<script type="text/javascript">
    var disqus_shortname = 'owenyang';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




  </div>
</div>

<nav  class="outer-nav top horizontal">

          <a class="icon-home"  href="/"><span>Home</span></a>

          <a class="icon-mail"  href="/about/"><span>Contact</span></a>

</nav>

</div>
</body>
</html>
